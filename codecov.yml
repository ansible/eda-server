# Codecov configuration for eda-server
# Documentation: https://docs.codecov.com/docs/codecovyml-reference

coverage:
  status:
    # Project-wide coverage status
    project:
      default:
        target: auto      # Maintain current coverage level
        threshold: 1%     # Allow 1% coverage decrease
        base: auto        # Use base branch coverage
        if_not_found: success  # Don't fail if no base coverage

    # Patch coverage - NEW CODE COVERAGE REQUIREMENTS
    patch:
      default:
        target: 80%      # NEW CODE must have 80% coverage
        threshold: 0%    # No tolerance - strict 80% requirement
        base: auto
        if_not_found: failure  # Fail if we can't determine patch coverage

  # Precision for coverage reporting
  precision: 2
  round: down
  range: "70...100"

comment:
  layout: "diff, flags, files"
  behavior: default
  require_changes: false  # if true: only post the comment if coverage changes
  require_base: false     # [true :: must have a base report to post]
  require_head: true      # [true :: must have a head report to post]
  hide_project_coverage: false # [true :: only show coverage on the git diff aka patch coverage]
